{% extends 'template.twig' %}
{% import 'component.twig' as component %}

{% block title %}Evénements{% endblock %}

{% block content %}
	<div class="row">
	<div class="col-md-3">
		<ul class="nav nav-pills nav-stacked">
  		  <li><a href="{{component.url('/home') }}"><i class="fa fa-home"></i> Accueil</a></li>
  		  <li><a href="{{component.url('/users') }}"><i class="fa fa-users"></i> Gestion des utilisateurs</a></li>
		  <li class="active"><a href="{{component.url('/events') }}"><i class="fa fa-eye"></i> Journal des événements</a></li>
		  <li><a href="{{ component.url('/tickets') }}"><i class="fa fa-ticket"></i> Gestion des tickets</a></li>
		  <li><a href="{{ component.url('/config') }}"><i class="fa fa-wrench"></i> Configuration</a></li>
		</ul>
	</div>
	<div class="col-md-9">
  		<table class="table">
  		  <tr>
  		  	<th>#</th>
  		  	<th></th>
  		  	<th><i class="fa fa-user"></i> Utilisateur</th>
  		  	<th><i class="fa fa-calendar-o"></i> Date</th>
  		  	<th>Type</th>
  		  	<th>Actions</th>
  		  </tr>

  		  {% for event in events %}
  		  {% if event.category|lower == 'erreur' %}
  		      {% set class = 'danger' %}
  		  {% elseif event.category|lower == 'info' %}
  		      {% set class = 'info' %}
  		  {% endif %}
  		  <tr class="{{class}}">
  		  	<td>{{ event.id }}</td>
  		  	<td>{{ event.value }}</td>
  		  	<td><a href="user/{{event.user}}">{{event.nom}} {{event.prenom}}</a></td>
  		  	<td>{{ event.date|date('d/m/Y') }} {{ event.date|date('H:i:s') }}</td>
  		  	<td><a href="events/category/{{ event.category|lower }}">{{ event.category }}</a></td>
  		  	<td>
  		  		<a href="events/user/{{event.user}}" title="Voir tous les événements de l'utilisateur {{ event.nom }} {{ event.prenom }}"><i class="fa fa-user"></i></a>
  		  		<a href="events/date/{{event.date}}" title="Voir tous les événements datant du {{ event.date|date('d/m/Y') }}"><i class="fa fa-calendar"></i></a>
  		  		<a href="events/category/{{event.category|lower}}" title="Voir tous les événements de type {{event.category|capitalize}}"><i class="fa fa-folder-o"></i></a>
  		  	</td>
  		  </tr>
  		  {% endfor %}
  		</table>
	</div>
	</div>
{% endblock %}